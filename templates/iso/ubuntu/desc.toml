
[description]
name = "ubuntu"
virtio_name = ""
virtio_url = ""
iso_name = "ubuntu-24.04.2-desktop-amd64.iso"
iso_url = "https://ftp-stud.hs-esslingen.de/pub/Mirrors/releases.ubuntu.com/24.04.2/ubuntu-24.04.2-desktop-amd64.iso"
iso_type = "linux"
answerfile = ""
path_postinstall = ""
file_postinstall = "postinstall.bash"
enabled_overlays = []
config_version = "0.0.3"

[run]
vmname = "ubuntu-test"
res_cpu = 4
res_mem = 4096
net_devs = [["nat"]]
net_ports = [["2224", "22"]]

[addon_answerfile]
answerfile_enable_networking = false
answerfile_enable_dhcp = false
answerfile_enable_crypto = false
answerfile_enable_lvm = true
answerfile_confirm_partitioning = true
answerfile_confirm_final_reboot = true
host_name = "ubuntu"
host_domain = "local"
net_dhcp = true
packages_install = ["openssh-server"]
additional_users = ["umi-admin"]
sudo_users = ["umi", "umi-admin"]
admin_users = ["umi-admin"]
admin_group_name = "admin"

[addon_postinstall]
password_generate = false
copy_additional_scripts = ["installer/default/finalize.bash"]
exec_additional_scripts = [
  "installer/default/hostnet_dhcp.bash",
  "installer/default/hostnames.bash",
  "installer/default/apt.bash",
  "installer/default/essentials.bash",
  "installer/default/shell.bash",
  "installer/default/user.bash",
  "installer/default/ssh.bash",
  "installer/default/locale.bash",
  "installer/default/firewall.bash",
]

[addon_user]
user_enabled = true
default_user_dir = "umi"

[addon_grub]
timeout = 0

[addon_ssh]
ssh_enabled = true
config_auth_append = "~/.ssh/id_rsa_dummy.pub"

[addon_cmd]
cmd_enabled = true
cmds = [
  { "name" = "cmd1", "scope" = "", "con" = "nat", "cmd" = "echo hello" },
  { "name" = "bash", "scope" = "", "con" = "nat", "cmd" = "bash -i" },
]

[[env]]
"DEFAULT_HOST" = "ubuntu"
"DEFAULT_DOMAIN" = "local"
"DEFAULT_NIC_0" = "enp0s2"
"DEFAULT_FW_POLICY_IN" = "DROP"
"DEFAULT_FW_POLICY_OUT" = "ACCEPT"
"DEFAULT_FW_POLICY_FWD" = "DROP"
"DEFAULT_FW_PORTS_TCP" = "22 8080"
"DEFAULT_FW_PORTS_UDP" = ""
